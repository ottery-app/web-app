{"ast":null,"code":"import User from \"../../managers/User\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT, CLEAR_ERRORS, LOAD_USER, UNLOAD_USER, ADD_STATE, ADD_STATE_FAIL } from \"./types\"; //no body ever hears cries for help\n\nexport default ((state, action) => {\n  console.log(action);\n  console.log(state);\n\n  switch (action.type) {\n    case LOAD_USER:\n      console.log(\"loading user\");\n      return { ...state,\n        loading: false,\n        isAuthenticated: true,\n        username: localStorage.getItem(\"user\"),\n        token: localStorage.getItem(\"token\"),\n        state: localStorage.getItem(\"state\"),\n        manager: User({\n          username: localStorage.getItem(\"username\"),\n          password: localStorage.getItem(\"token\"),\n          state: localStorage.getItem(\"state\")\n        })\n      };\n\n    case UNLOAD_USER:\n      console.log(\"unloading user\");\n      return { ...state,\n        loading: false,\n        isAuthenticated: false\n      };\n\n    case REGISTER_SUCCESS:\n      console.log(\"regestering user\");\n\n    case LOGIN_SUCCESS:\n      console.log(\"loggin in user\");\n      localStorage.setItem(\"token\", action.payload.token);\n      localStorage.setItem(\"username\", action.payload.username);\n      localStorage.setItem(\"state\", action.payload.state);\n      return { ...state,\n        ...action.payload,\n        username: action.payload.username,\n        token: action.payload.token,\n        state: action.payload.state,\n        isAuthenticated: true,\n        loading: false,\n        manager: User({\n          username: JSON.parse(localStorage.getItem(\"user\")).username,\n          password: localStorage.getItem(\"token\"),\n          state: JSON.parse(localStorage.getItem(\"user\")).state\n        })\n      };\n\n    case REGISTER_FAIL:\n      console.log(\"regester fail\");\n\n    case LOGIN_FAIL:\n      console.log(\"login fail\");\n\n    case LOGOUT:\n      console.log(\"remove user\");\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      return { ...state,\n        token: null,\n        user: null,\n        isAuthenticated: false,\n        loading: false,\n        error: action.payload,\n        manager: null\n      };\n\n    case ADD_STATE:\n      localStorage.setItem(\"user\", action.payload.user);\n      alert(\"UPDATE THE STATE\");\n      return { ...state,\n        user: action.payload.user\n      };\n\n    case ADD_STATE_FAIL:\n      console.log(\"adding state fail\");\n      return { ...state\n      };\n\n    case CLEAR_ERRORS:\n      console.log(\"clear errors\");\n      return { ...state,\n        error: null\n      };\n    //CHANGE STATE HERE\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["/home/lewibs/Documents/github/ottery/web-app/src/context/auth/authReducer.js"],"names":["User","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","CLEAR_ERRORS","LOAD_USER","UNLOAD_USER","ADD_STATE","ADD_STATE_FAIL","state","action","console","log","type","loading","isAuthenticated","username","localStorage","getItem","token","manager","password","setItem","payload","JSON","parse","removeItem","user","error","alert"],"mappings":"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","sourcesContent":["import User from \"../../managers/User\";\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  CLEAR_ERRORS,\n  LOAD_USER,\n  UNLOAD_USER,\n  ADD_STATE,\n  ADD_STATE_FAIL,\n} from \"./types\";\n//no body ever hears cries for help\nexport default (state, action) => {\n  console.log(action);\n  console.log(state);\n  switch (action.type) {\n    case LOAD_USER:\n      console.log(\"loading user\");\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: true,\n        username: localStorage.getItem(\"user\"),\n        token: localStorage.getItem(\"token\"),\n        state: localStorage.getItem(\"state\"),\n        manager: User({\n          username: localStorage.getItem(\"username\"),\n          password: localStorage.getItem(\"token\"),\n          state: localStorage.getItem(\"state\"),\n        })\n      };\n    case UNLOAD_USER:\n      console.log(\"unloading user\");\n      return {\n        ...state,\n        loading: false,\n        isAuthenticated: false,\n      };\n    case REGISTER_SUCCESS:\n      console.log(\"regestering user\");\n    case LOGIN_SUCCESS:\n      console.log(\"loggin in user\");\n      localStorage.setItem(\"token\", action.payload.token);\n      localStorage.setItem(\"username\", action.payload.username);\n      localStorage.setItem(\"state\", action.payload.state);\n      return {\n        ...state,\n        ...action.payload,\n        username: action.payload.username,\n        token: action.payload.token,\n        state: action.payload.state,\n        isAuthenticated: true,\n        loading: false,\n        manager: User({\n          username: JSON.parse(localStorage.getItem(\"user\")).username,\n          password: localStorage.getItem(\"token\"),\n          state: JSON.parse(localStorage.getItem(\"user\")).state,\n        })\n      };\n    case REGISTER_FAIL:\n      console.log(\"regester fail\");\n    case LOGIN_FAIL:\n      console.log(\"login fail\");\n    case LOGOUT:\n      console.log(\"remove user\");\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      return {\n        ...state,\n        token: null,\n        user: null,\n        isAuthenticated: false,\n        loading: false,\n        error: action.payload,\n        manager: null,\n      };\n    case ADD_STATE:\n      localStorage.setItem(\"user\", action.payload.user);\n      alert(\"UPDATE THE STATE\")\n      return {\n        ...state,\n        user: action.payload.user\n      };\n    case ADD_STATE_FAIL:\n      console.log(\"adding state fail\");\n      return {...state};\n    case CLEAR_ERRORS:\n      console.log(\"clear errors\");\n      return {\n        ...state,\n        error: null,\n      };\n    //CHANGE STATE HERE\n    default:\n      return state;\n  }\n};"]},"metadata":{},"sourceType":"module"}