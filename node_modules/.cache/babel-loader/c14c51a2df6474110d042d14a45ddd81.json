{"ast":null,"code":"var _jsxFileName = \"/home/lewibs/Documents/github/ottery/web-app/src/context/auth/AuthState.js\",\n    _s = $RefreshSig$();\n\nimport { useReducer } from \"react\";\nimport AuthContext from \"./authContext\";\nimport authReducer from \"./authReducer\";\nimport { REGISTER_SUCCESS, REGISTER_FAIL, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT, CLEAR_ERRORS, LOAD_USER, UNLOAD_USER, ADD_STATE, ADD_STATE_FAIL } from \"./types\";\nimport User from \"../../managers/User.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AuthState(props) {\n  _s();\n\n  const initialState = {\n    token: localStorage.getItem(\"token\"),\n    isAuthenticated: null,\n    loading: true,\n    error: null,\n    user: null,\n    manager: null\n  };\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  function success(type, res) {\n    dispatch({\n      type: type,\n      payload: res.data\n    });\n  }\n\n  function error(type, err) {\n    dispatch({\n      type: type,\n      payload: err.response.data.msg\n    });\n  } //load user token\n\n\n  function loadUser() {\n    if (initialState.token) {\n      dispatch({\n        type: LOAD_USER\n      });\n    } else {\n      dispatch({\n        type: UNLOAD_USER\n      });\n    }\n  }\n\n  ; //Register User\n\n  async function register(email, username, password, firstName, middleName, lastName, gender, date, country, address, city, state, zip, phone) {\n    User().register(email, username, password, firstName, middleName, lastName, gender, date, country, address, city, state, zip, phone, res => {\n      success(REGISTER_SUCCESS, res);\n    }, err => {\n      error(REGISTER_FAIL, err);\n    });\n  }\n\n  ; //Login User\n\n  async function login(username, password) {\n    User().login(username, password, res => {\n      success(LOGIN_SUCCESS, res);\n    }, err => {\n      error(LOGIN_FAIL, err);\n    });\n  }\n\n  ; //clear user data\n\n  function logout() {\n    dispatch({\n      type: LOGOUT\n    });\n  }\n\n  ; //Clear Errors\n\n  function clearErrors() {\n    dispatch({\n      type: CLEAR_ERRORS\n    });\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token: state.token,\n      isAuthenticated: state.isAuthenticated,\n      loading: state.loading,\n      error: state.error,\n      manager: state.manager,\n      loadUser,\n      register,\n      login,\n      logout,\n      clearErrors\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AuthState, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n\n_c = AuthState;\n;\nexport default AuthState;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"sources":["/home/lewibs/Documents/github/ottery/web-app/src/context/auth/AuthState.js"],"names":["useReducer","AuthContext","authReducer","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","CLEAR_ERRORS","LOAD_USER","UNLOAD_USER","ADD_STATE","ADD_STATE_FAIL","User","AuthState","props","initialState","token","localStorage","getItem","isAuthenticated","loading","error","user","manager","state","dispatch","success","type","res","payload","data","err","response","msg","loadUser","register","email","username","password","firstName","middleName","lastName","gender","date","country","address","city","zip","phone","login","logout","clearErrors","children"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SACEC,gBADF,EAEEC,aAFF,EAGEC,aAHF,EAIEC,UAJF,EAKEC,MALF,EAMEC,YANF,EAOEC,SAPF,EAQEC,WARF,EASEC,SATF,EAUEC,cAVF,QAWO,SAXP;AAYA,OAAOC,IAAP,MAAiB,wBAAjB;;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AAExB,QAAMC,YAAY,GAAG;AACnBC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADY;AAEnBC,IAAAA,eAAe,EAAE,IAFE;AAGnBC,IAAAA,OAAO,EAAE,IAHU;AAInBC,IAAAA,KAAK,EAAE,IAJY;AAKnBC,IAAAA,IAAI,EAAE,IALa;AAMnBC,IAAAA,OAAO,EAAE;AANU,GAArB;AASA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB1B,UAAU,CAACE,WAAD,EAAcc,YAAd,CAApC;;AAEA,WAASW,OAAT,CAAiBC,IAAjB,EAAuBC,GAAvB,EAA4B;AAC1BH,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAEA,IADC;AAEPE,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFN,KAAD,CAAR;AAID;;AAED,WAAST,KAAT,CAAeM,IAAf,EAAqBI,GAArB,EAA0B;AACxBN,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAEA,IADC;AAEPE,MAAAA,OAAO,EAAEE,GAAG,CAACC,QAAJ,CAAaF,IAAb,CAAkBG;AAFpB,KAAD,CAAR;AAID,GAzBuB,CA2BxB;;;AACA,WAASC,QAAT,GAAoB;AAClB,QAAInB,YAAY,CAACC,KAAjB,EAAwB;AACtBS,MAAAA,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEnB;AAAR,OAAD,CAAR;AACD,KAFD,MAEO;AACLiB,MAAAA,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAElB;AAAR,OAAD,CAAR;AACD;AACF;;AAAA,GAlCuB,CAoCxB;;AACA,iBAAe0B,QAAf,CAAwBC,KAAxB,EAA+BC,QAA/B,EAAyCC,QAAzC,EAAmDC,SAAnD,EAA8DC,UAA9D,EAA0EC,QAA1E,EAAoFC,MAApF,EAA4FC,IAA5F,EAAkGC,OAAlG,EAA2GC,OAA3G,EAAoHC,IAApH,EAA0HtB,KAA1H,EAAiIuB,GAAjI,EAAsIC,KAAtI,EAA6I;AAC3IpC,IAAAA,IAAI,GAAGuB,QAAP,CAAgBC,KAAhB,EAAuBC,QAAvB,EAAiCC,QAAjC,EAA2CC,SAA3C,EAAsDC,UAAtD,EAAkEC,QAAlE,EAA4EC,MAA5E,EAAoFC,IAApF,EAA0FC,OAA1F,EAAmGC,OAAnG,EAA4GC,IAA5G,EAAkHtB,KAAlH,EAAyHuB,GAAzH,EAA8HC,KAA9H,EACGpB,GAAD,IAAS;AAACF,MAAAA,OAAO,CAACxB,gBAAD,EAAmB0B,GAAnB,CAAP;AAA+B,KAD3C,EAEGG,GAAD,IAAS;AAACV,MAAAA,KAAK,CAAClB,aAAD,EAAgB4B,GAAhB,CAAL;AAA0B,KAFtC;AAID;;AAAA,GA1CuB,CA4CxB;;AACA,iBAAekB,KAAf,CAAqBZ,QAArB,EAA+BC,QAA/B,EAAyC;AACvC1B,IAAAA,IAAI,GAAGqC,KAAP,CAAaZ,QAAb,EAAuBC,QAAvB,EACGV,GAAD,IAAS;AAACF,MAAAA,OAAO,CAACtB,aAAD,EAAgBwB,GAAhB,CAAP;AAA4B,KADxC,EAEGG,GAAD,IAAS;AAACV,MAAAA,KAAK,CAAChB,UAAD,EAAa0B,GAAb,CAAL;AAAuB,KAFnC;AAID;;AAAA,GAlDuB,CAoDxB;;AACA,WAASmB,MAAT,GAAkB;AAChBzB,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAErB;AAAR,KAAD,CAAR;AACD;;AAAA,GAvDuB,CAyDxB;;AACA,WAAS6C,WAAT,GAAuB;AACrB1B,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAEpB;AAAR,KAAD,CAAR;AACD;;AAAA;AAED,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLS,MAAAA,KAAK,EAAEQ,KAAK,CAACR,KADR;AAELG,MAAAA,eAAe,EAAEK,KAAK,CAACL,eAFlB;AAGLC,MAAAA,OAAO,EAAEI,KAAK,CAACJ,OAHV;AAILC,MAAAA,KAAK,EAAEG,KAAK,CAACH,KAJR;AAKLE,MAAAA,OAAO,EAAEC,KAAK,CAACD,OALV;AAMLW,MAAAA,QANK;AAOLC,MAAAA,QAPK;AAQLc,MAAAA,KARK;AASLC,MAAAA,MATK;AAULC,MAAAA;AAVK,KADT;AAAA,cAcGrC,KAAK,CAACsC;AAdT;AAAA;AAAA;AAAA;AAAA,UADF;AAkBD;;GAhFQvC,S;;KAAAA,S;AAgFR;AAED,eAAeA,SAAf","sourcesContent":["import { useReducer } from \"react\";\nimport AuthContext from \"./authContext\";\nimport authReducer from \"./authReducer\";\nimport {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n  CLEAR_ERRORS,\n  LOAD_USER,\n  UNLOAD_USER,\n  ADD_STATE,\n  ADD_STATE_FAIL,\n} from \"./types\";\nimport User from \"../../managers/User.js\";\n\nfunction AuthState(props) {\n\n  const initialState = {\n    token: localStorage.getItem(\"token\"),\n    isAuthenticated: null,\n    loading: true,\n    error: null,\n    user: null,\n    manager: null,\n  };\n\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  function success(type, res) {\n    dispatch({\n      type: type,\n      payload: res.data,\n    });\n  }\n\n  function error(type, err) {\n    dispatch({\n      type: type,\n      payload: err.response.data.msg,\n    });\n  }\n\n  //load user token\n  function loadUser() {\n    if (initialState.token) {\n      dispatch({ type: LOAD_USER });\n    } else {\n      dispatch({ type: UNLOAD_USER });\n    }\n  };\n\n  //Register User\n  async function register(email, username, password, firstName, middleName, lastName, gender, date, country, address, city, state, zip, phone) {\n    User().register(email, username, password, firstName, middleName, lastName, gender, date, country, address, city, state, zip, phone, \n      (res) => {success(REGISTER_SUCCESS, res)},\n      (err) => {error(REGISTER_FAIL, err)}\n    )\n  };\n\n  //Login User\n  async function login(username, password) {\n    User().login(username, password, \n      (res) => {success(LOGIN_SUCCESS, res)},\n      (err) => {error(LOGIN_FAIL, err)}\n    )\n  };\n\n  //clear user data\n  function logout() {\n    dispatch({ type: LOGOUT })\n  };\n\n  //Clear Errors\n  function clearErrors() {\n    dispatch({ type: CLEAR_ERRORS })\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token: state.token,\n        isAuthenticated: state.isAuthenticated,\n        loading: state.loading,\n        error: state.error,\n        manager: state.manager,\n        loadUser,\n        register,\n        login,\n        logout,\n        clearErrors,\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthState;"]},"metadata":{},"sourceType":"module"}